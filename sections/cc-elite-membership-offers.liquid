{% assign elite_product =  settings.elite_product.id | times: 1 %} 
{% assign cart_has_no_elite_item = true %}
{% for item in cart.items %}
  {% if  item.product_id == elite_product %}
    {% assign cart_has_no_elite_item = false %}
  {% endif %}
{% endfor %}
<section class="cc-mm-instant-saving-elite-section" id="cc-mm-instant-saving-elite-section">
  <div class="cc-mm-instant-saving-free-row">
    <div class="page-width">
      <div class="cc-mm-instant-saving-free-wrap">
        <div class="cc-mm-instant-saving-text">
          <h3>Check out these UNBELIEVABLE Savings</h3>
          {% if section.settings.btn_url != blank %}
          {% if cart_has_no_elite_item %}
            {% if customer.tags contains "elite_member" %}
              {% comment %} <a href="javascript:alreadyMember('ELITE')" class="cc-elite-button cc-mm-best-value-elite-btn1">{{- section.settings.btn_text -}}</a> {% endcomment %}
            {% else %}
              <a href="#" data-id="{{ settings.elite_product.selected_or_first_available_variant.id }}"
                    class="{% if customer.tags contains 'club_member' %}SSO_popup_elite_upgrade {% else %}SSO_popup_elite_join {% endif %} cc-elite-button mobile-hide">
                {{- section.settings.btn_text -}}
              </a>
          {% endif %}
          {% else %}
            <a href="#"
                  class="{% unless customer %}SSO_popup_elite_join{% endunless %} cc-elite-button mobile-hide">
              {{- section.settings.btn_text -}}
            </a>
          {% endif %}
          {% endif %}
        </div>
        <div class="cc-mm-instant-saving-free-products">
          <div class="eyes-emoji">
            <svg xmlns="http://www.w3.org/2000/svg" width="73" height="65" viewBox="0 0 73 65" fill="none">
              <ellipse cx="14" cy="22.5" rx="14" ry="22.5" transform="matrix(-0.932569 -0.360992 -0.360992 0.932569 72.1982 22.0771)" fill="url(#paint0_radial_15_3509)"></ellipse>
              <ellipse cx="14" cy="22.5" rx="14" ry="22.5" transform="matrix(-0.932569 -0.360992 -0.360992 0.932569 42.3564 10.5254)" fill="url(#paint1_radial_15_3509)"></ellipse>
              <path d="M49.3652 39.5102C47.61 44.0447 49.3632 48.624 52.8248 49.964C56.2863 51.3039 60.6659 49.0986 62.4212 44.5641C64.1765 40.0296 62.4232 35.4503 58.9617 34.1103C55.5001 32.7704 51.1205 34.9757 49.3652 39.5102Z" fill="#031546" stroke="#3F6BA0" stroke-width="2"></path>
              <path d="M19.5234 27.9585C17.7682 32.4929 19.5214 37.0723 22.983 38.4122C26.4446 39.7522 30.8241 37.5468 32.5794 33.0123C34.3347 28.4779 32.5814 23.8985 29.1199 22.5586C25.6583 21.2186 21.2787 23.424 19.5234 27.9585Z" fill="#031546" stroke="#3F6BA0" stroke-width="2"></path>
              <defs>
                  <radialGradient id="paint0_radial_15_3509" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(14 22.5) rotate(90) scale(22.5 14)">
                      <stop offset="0.84" stop-color="white"></stop>
                      <stop offset="1" stop-color="#E5E5E5"></stop>
                  </radialGradient>
                  <radialGradient id="paint1_radial_15_3509" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(14 22.5) rotate(90) scale(22.5 14)">
                      <stop offset="0.84" stop-color="white"></stop>
                      <stop offset="1" stop-color="#E5E5E5"></stop>
                  </radialGradient>
              </defs>
            </svg>
          </div>
          <div class="splide cc-products-slider">
            <div class="splide__track">
              <div class="splide__list">
                {% for product in section.settings.collection_id.products %}
                  <div class="splide__slide">
                    <a href="{{ product.url }}" class="cc-mm-instant-saving-free-product-card">
                      <img
                        src="{{ product.featured_image | img_url:'master' }}"
                        class="img-responsive cc-mm-instant-saving-free-product-card-img"
                      >
                      <h3>{{ product.title }}</h3>
                      <div class="cc-membership-table-scroll">
                        <table class="price-table">
                          <tbody>
                            <tr>
                              <td class="market-cell">
                                <strong>Market</strong>
                                <span class="price">{{ product.price | money }}</span>
                              </td>
                              <td class="member-cell">
                                <strong>Member</strong>
                                <span class="price">{{ product.metafields.custom.member_price | times: 100 | money }}</span>
                              </td>
                              <td class="elite-cell active">
                                <strong>Elite</strong>
                                <span class="price">{{ product.metafields.custom.elite_price | times: 100 | money }}</span>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <div class="cc-mm-instant-saving-free-product-card-emoji">
                        <svg xmlns="http://www.w3.org/2000/svg" width="65" height="65" viewBox="0 0 65 65" fill="none">
                          <g clip-path="url(#clip0_15_3479)">
                              <path d="M25.6167 58.0184C39.7643 61.7657 54.2711 53.3346 58.0184 39.1869C61.7658 25.0392 53.3346 10.5325 39.1869 6.78515C25.0393 3.03782 10.5325 11.469 6.78517 25.6166C3.03785 39.7643 11.469 54.2711 25.6167 58.0184Z" fill="url(#paint0_radial_15_3479)"></path>
                              <path d="M27.6651 50.2851C32.2031 51.4871 37.0281 48.1335 38.4422 42.7948C39.8563 37.456 37.3239 32.1537 32.786 30.9518C28.2481 29.7498 23.423 33.1033 22.0089 38.4421C20.5948 43.7808 23.1272 49.0831 27.6651 50.2851Z" fill="url(#paint1_linear_15_3479)"></path>
                              <path d="M42.6863 29.9393C44.9805 30.547 47.4151 28.8698 48.124 26.1932C48.833 23.5167 47.5479 20.8542 45.2537 20.2466C42.9594 19.6389 40.5249 21.3161 39.8159 23.9927C39.107 26.6692 40.3921 29.3317 42.6863 29.9393Z" fill="#1C355E"></path>
                              <path d="M24.6853 25.1714C26.9795 25.7791 29.4141 24.1019 30.1231 21.4253C30.832 18.7487 29.5469 16.0863 27.2527 15.4786C24.9585 14.871 22.5239 16.5481 21.815 19.2247C21.106 21.9013 22.3911 24.5637 24.6853 25.1714Z" fill="#1C355E"></path>
                              <g clip-path="url(#clip1_15_3479)">
                                  <ellipse cx="24.8284" cy="20.3185" rx="6.40304" ry="6.40304" transform="rotate(15.0501 24.8284 20.3185)" fill="#FFA900"></ellipse>
                                  <path d="M28.4475 26.0186C27.8376 26.2715 27.0774 26.4631 26.2462 26.5314C26.075 26.5479 25.9613 26.3506 26.042 26.2055C26.2893 25.7509 26.5029 25.2665 26.6441 24.7417C27.3705 22.04 26.0824 19.2342 25.6201 18.3179C25.5207 18.1453 25.3069 18.0878 25.1537 18.1925C24.2994 18.734 21.7779 20.5153 21.0462 23.2365C20.8842 23.8391 20.8194 24.4677 20.8285 25.0538C20.8256 25.2197 20.6477 25.3386 20.5027 25.258C19.2945 24.5579 18.3964 23.712 18.0913 23.2965C15.6443 19.7623 17.8864 15.8424 19.9594 14.0238C22.2663 11.9555 24.7849 10.34 25.4925 7.32061C25.5672 6.96552 26.0186 6.8368 26.2878 7.07592C28.3022 8.8767 29.2746 11.7901 29.2653 14.0269C29.2646 14.2008 29.4645 14.2974 29.6025 14.1916C30.2334 13.7078 30.6518 12.9487 30.8642 12.2248C30.974 11.8166 31.5563 11.7439 31.7642 12.1333C33.3372 15.1198 34.7982 23.3285 28.4475 26.0186Z" fill="#FF421D"></path>
                              </g>
                              <g clip-path="url(#clip2_15_3479)">
                                  <ellipse cx="45.2844" cy="25.818" rx="6.40304" ry="6.40304" transform="rotate(15.0501 45.2844 25.818)" fill="#FFA900"></ellipse>
                                  <path d="M48.9035 31.5182C48.2936 31.7711 47.5335 31.9627 46.7023 32.0309C46.5311 32.0475 46.4174 31.8501 46.4981 31.7051C46.7454 31.2505 46.959 30.7661 47.1001 30.2413C47.8266 27.5396 46.5385 24.7338 46.0762 23.8175C45.9767 23.6449 45.7629 23.5874 45.6097 23.6921C44.7555 24.2336 42.234 26.0149 41.5023 28.7361C41.3403 29.3386 41.2754 29.9673 41.2846 30.5534C41.2816 30.7193 41.1038 30.8382 40.9587 30.7575C39.7505 30.0575 38.8525 29.2116 38.5474 28.7961C36.1004 25.2619 38.3424 21.342 40.4154 19.5234C42.7223 17.455 45.2409 15.8396 45.9486 12.8202C46.0232 12.4651 46.4747 12.3364 46.7439 12.5755C48.7583 14.3763 49.7306 17.2897 49.7214 19.5265C49.7206 19.7004 49.9205 19.797 50.0586 19.6912C50.6895 19.2074 51.1079 18.4482 51.3203 17.7244C51.43 17.3162 52.0123 17.2435 52.2202 17.6329C53.7932 20.6194 55.2542 28.8281 48.9035 31.5182Z" fill="#FF421D"></path>
                              </g>
                          </g>
                          <defs>
                              <radialGradient id="paint0_radial_15_3479" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(35.5193 20.632) rotate(104.835) scale(38.6757)">
                                  <stop offset="0.52" stop-color="#FFDC63"></stop>
                                  <stop offset="1" stop-color="#FF9220"></stop>
                              </radialGradient>
                              <linearGradient id="paint1_linear_15_3479" x1="27.6651" y1="50.2851" x2="32.786" y2="30.9518" gradientUnits="userSpaceOnUse">
                                  <stop stop-color="#9C5929"></stop>
                                  <stop offset="1" stop-color="#361F0E"></stop>
                              </linearGradient>
                              <clipPath id="clip0_15_3479">
                                  <rect width="53" height="53" fill="white" transform="translate(13.5703 1.52588e-05) rotate(14.8354)"></rect>
                              </clipPath>
                              <clipPath id="clip1_15_3479">
                                  <rect width="20.1238" height="20.1238" fill="white" transform="translate(18.6748 4.45558) rotate(15.0501)"></rect>
                              </clipPath>
                              <clipPath id="clip2_15_3479">
                                  <rect width="20.1238" height="20.1238" fill="white" transform="translate(39.1309 9.95517) rotate(15.0501)"></rect>
                              </clipPath>
                          </defs>
                        </svg>
                      </div>
                    </a>
                  </div>
                {% endfor %}
              </div>
            </div>
          </div>
          <div class="cc-elite-button-wrap desktop-hide">
          {% if section.settings.btn_url != blank %}
            <a href="{{ section.settings.btn_url }}" class="cc-elite-button">
              {{- section.settings.btn_text -}}
            </a>
          {% endif %}
          </div>
        </div>
      </div>
      <div class="cc-mm-offer-note">
          Prices shown are for illustrative purposes only, actual prices may vary. While supplies last.
        </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "<> Elite Membership Offer",
  "settings": [
    {
      "type": "collection",
      "id": "collection_id",
      "label": "Collection Here"
    },

{
          "type": "text",
          "label": "Button Text",
          "id": "btn_text",
          "default": "Join Elite"
        },
        {
          "type": "url",
          "label": "Button Link",
          "id": "btn_url"
        },
  ],
  "presets": [
    {
      "name": "<> Elite Membership Offer",
    }
  ]
}
{% endschema %}
