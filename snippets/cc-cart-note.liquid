{% style %}
  .cc-product-elite_member .cc-pricing-table-member-cell-inner-row3 ul,
  .cc-product-club_member .cc-pricing-table-member-cell-inner-row3 ul {
    border-bottom: none !important;
}
  .cc-product-elite_member .product-form,
  .cc-product-club_member .product-form {
    margin-top:0;
  }
  .cc-product-elite_member .product-form__buttons,
  .cc-product-club_member .product-form__buttons {
    max-width: 100%;
}
.cc-product-elite_member .product-form__submit:before,
.cc-product-club_member .product-form__submit:before {
    position: absolute;
    top: 12px;
    left: 14px;
    content: '';
    background-image: url('{{ 'cart-icon.png' | file_url }}');
    width: 100%;
    height: 100%;
    background-size: 20px;
    background-repeat: no-repeat;
    z-index: 9;
}
.cc-product-elite_member .product-form__submit {
      background-color: #1C355E !important;
}
.cc-product-club_member .product-form__submit {
    background-color: #e1241d !important;
    border: 1px solid #e1241d !important;
}
.cc-product-elite_member .product-form__submit,
.cc-product-club_member .product-form__submit {
    margin-bottom: 1rem;
    width: 100%;
    padding: 15px 40px;
    border-radius: 5px !important;
    position:relative;
  
}
        .cc-mm-instant-saving-free-product-card-img {
            border-radius: 16.508px;
            height: 226px;
            object-fit: cover;
        }

        .price-table h3 {
            color: var(--Color-Neutral-Neutral-0, #FFF);
            text-align: center;
            font-size: var(--Type-text-s, 16px);
            font-style: normal;
            font-weight: 700;
            line-height: 20.635px;
          margin:0px;
        }

        .cc-mm-instant-saving-free-product-card-emoji {
            position: absolute;
            bottom: -21px;
            right: -21px;
        }


        .price-table {
            display: table;
            width: 100%;
            border-spacing: 0;
            border: 1px solid transparent;
            border-radius: 10px;
          margin-top:40px;
        }

        .price-table td strong {
          display:flex;
          justify-content:center;
          align-items:center;
        color: var(--Color-Neutral-Neutral-700, #818898);
        text-align: center;
        font-size: var(--Type-text-small, 14px);
        font-style: normal;
        font-weight: 700;
        line-height: 27.441px; /* 196.008% */
            /* 147.392% */
            border-bottom: 1.032px solid var(--Color-Neutral-Neutral-500, #C1C7D0);
          padding:8px;
        }

          .cc-pricing-table-wrap .elite-cell svg path{
              fill:#1C355E;
          }

        .price-table td {
          padding:0;
        }
        .price-table .market-cell {
            background-color: #fff;
            color: #333;
            text-align: left;
            border-top-left-radius: 10px;
            border-bottom-left-radius: 10px;
          padding:0px;
        }

        .market-cell.active {
            border-radius: 10px;
            transform: scale(1.1);
          border:2px solid #818898;
        }

        .member-cell.active {
            border-radius: 10px;
            transform: scale(1.1);
            border: 2px solid #E1251C !important;
        }
        .member-cell.active strong{
          border:3px solid #FFD600 !important;
          border-radius: 7px 7px 0 0;
        }
        .member-cell.active .price{
          border:3px solid #E1251C !important;
          border-radius: 0px 0px 7px 7px;
        }

        .price-table .price {
          color: var(--Color-Neutral-Neutral-700, #818898);
        text-align: center;
        font-size: var(--Type-text-base, 16px);
        font-style: normal;
        font-weight: 700;
        line-height: 18px; /* 205.808% */
            padding: 8px;
            display: block;
        }

        .price-table .elite-cell .price {
            background: #1C355E;
            color: #fff;
          border:3px solid #1C355E !important;
        }

        .price-table td:last-of-type strong {
            border-radius: 0px 10px 0px 0px;
        }
        .price-table td:last-of-type .price {
            border-radius: 0px 0 10px 0px;
        }


        .price-table .elite-cell strong {
            color: var(--Color-Elite-Blue-500, #1C355E) !important;
            text-transform: uppercase;
            border:3px solid #FFD600 !important;
          background:#FFD600;
        }

          .price-table .member-cell .price {
            background: var(--Color-Pricing-Member, #E1251C);
            color: var(--Color-Neutral-Neutral-0, #FFF);
            border-top:3px solid #E1251C;
            border-bottom:3px solid #E1251C;
            border-left:3px solid #E1251C;
            border-right:1px solid #C1C7D0;
        }
        .price-table .member-cell strong {
            background:#FFD600;
            color: var(--Color-Pricing-Member, #E1251C) !important;
            border-top:3px solid #FFD600;
            border-bottom:3px solid #FFD600;
            border-left:3px solid #FFD600;
            border-right:1px solid #C1C7D0;
        }



          .elite-cell.active {
            border-radius: 10px;
            transform: scale(1.1);
            border: 2px solid #1C355E !important;
        }
        .elite-cell.active strong{
          border:3px solid #FFD600 !important;
          border-radius: 7px 7px 0 0 !important;
        }
        .elite-cell.active .price{
          border:3px solid #1C355E !important;
          border-radius: 0px 0px 7px 7px !important;
        }

        .cc-pricing-table-market-cell-inner img {
            max-width: 90px;
            height: 30px;
        }
        .cc-pricing-table-market-cell-inner {
            display: flex;
            flex-direction: column;
            align-items: center;
            background: #E1251C;
            border-radius: 8px;
        }
        .cc-pricing-table-market-cell-inner-text a {
          display:flex;
          align-items:center;
          gap:10px;
          color: var(--Color-Canna-Cabana-Red-500, #E1251C);
        font-size: var(--Type-text-s, 16px);
        font-style: normal;
        font-weight: 600;
        line-height: 146.023%; /* 23.364px */
          text-decoration:none;
        }
        .cc-pricing-table-banner-wrap {
          margin-top: 30px;
          margin-bottom: 30px;
      }

        .cc-pricing-table-banner-wrap > div.active {
          display:block;
        }
        .cc-pricing-table-banner-wrap > div {
          display:none;
        }

    .cc-pricing-table-member-cell-inner-row1 {
        gap: 15px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        background: var(--Color-Elite-Blue-900, #031546);
        border-radius: 10px 10px 0 0;
        padding: 16px 12px;
    }

      .cc-pricing-table-member-cell-inner-row1 > img {
        max-width: 80px;
        
    }
      .cc-pricing-table-member-cell-inner-row1 h3 {
        margin: 0;
        color: #fff;
        font-size: 14px;
    }
      .cc-pricing-table-member-cell-inner-row1 svg {
         
      }
      .cc-pricing-table-member-cell-inner-row1 h3 {
        margin: 0;
        color: #fff;
    }
      .cc-pricing-table-member-cell-inner-row1 h3 span{
        display:block;
        font-weight:400;
      }

    .cc-pricing-table-member-cell-inner-row2 label {
      color:#1C355E;
      font-size:14px;
      align-items: center;

    }
    .cc-pricing-table-member-cell-inner-row2 label input {
      display: block;
    }
    .cc-pricing-table-member-cell-inner-row2 {
      background: var( --Golden-Surface, linear-gradient(118deg, #ab7917 8.15%, #ffdf6e 50%, #ab7917 91.85%) );
      padding: 12px 16px;
      border-radius: 0 0 10px 10px;
  }
    .cc-pricing-table-member-cell-inner-row3 ul {
      padding: 15px 20px 0;
      margin: 0;
      border-bottom: none;
      list-style: disc;

    }
    .cc-pricing-table-member-cell-inner-row3 ul li{
      color: #1C355E;
      font-size: 14px;
      line-height:18px;
    }
  .cutprice{
    text-decoration: line-through;
  }
  .cc-pricing-table-market-cell-inner-text-logo {
    display: flex;
    padding: 20px;
    border-bottom: 1px solid rgba(181, 46, 39, 1);
    gap: 20px;
    align-items: center;
  }
  .cc-pricing-table-market-cell-inner-text-logo p{
    font-size: 16px;
    color: #FFF;
    font-weight: 600;
  }
  .cc-pricing-table-market-cell-inner-text-logo p span {
    color: #FEDE6D;
  }
  .cc-pricing-table-market-cell-inner-text {
    padding: 16px 20px;
  }
  .cc-pricing-table-market-cell-inner-text p{
    color: #FFF;
    font-weight: 300;
    font-size: 14px;
  }
  .cc-pricing-table-market-cell-inner-text p b{
    font-weight: bold;
  }
  .cc-pricing-table-member-cell {
    margin-bottom: 30px;
  }
   
{% endstyle %}

{% assign elite = false %}
{% for item in cart.items %}
       {% if item.id == settings.elite_product.selected_or_first_available_variant.id %}
         {% assign elite = true %}
       {% break %}
     {% endif %}
{% endfor %}


{% assign base_price_active = true %}
{% assign club_price_active = false %}
{% assign elite_price_active = false %}

{% if customer and customer.tags contains 'elite_member' %}
  {% assign elite_price_active = true %}
  {% assign base_price_active = false %}
{% endif %}

{% if customer and customer.tags contains 'club_member' %}
  {% assign club_price_active = true %}
  {% assign base_price_active = false %}
{% endif %}

<div class="cc-pricing-table-wrap" data-elite="{{ id }}" data-currency="{{ shop.money_format }}">
  
{% if base_price_active %}
{% assign total_savings = 0 %}
  
  {% for item in cart.items %}
    {% assign base_price = item.line_price | money_without_currency   %}
    {% assign club_price = item.product.metafields.custom.member_price.value | default: base_price | times : item.quantity %}
    {% assign savings = base_price | minus: club_price %}
    {% assign total_savings = total_savings | plus: savings %}
  {% endfor %}
  
  <div class="cc-pricing-table-banner-wrap">
    <div class="cc-pricing-table-market-cell active">
      <div class="cc-pricing-table-market-cell-inner">
        <div class="cc-pricing-table-market-cell-inner-text-logo">
          <img src="{{ 'cc-logo.png' | file_url }}" alt="Market Logo" class="img-responsive">
          
          {% if total_savings > 0 %}
            <p>Save an <span>Extra ${{ total_savings }}</span> on this order with Cabana Club</p>
          {% else %}
            <p>Unlock additional savings by joining Cabana Club!</p>
          {% endif %}
        </div>
        <div class="cc-pricing-table-market-cell-inner-text">
          <label class="" for="cc-checkbox" style="color: #fff;display:inline-block;text-align:center"> 
                <b>Join Cabana Club</b> for Free to Unlock UNBEATABLE Savings on all orders + free shipping on orders
                over $50.
              </label>
              {% unless customer %}
                <div class="cc-mm-instant-saving-buttons" style=" justify-content: left;padding-top: 20px; ">
            
              <a href="#" class="cc-primary-button SSO_popup_register" style="justify-content: center;text-align: center; min-width: unset; width: 100%; padding: 10px !important; background: #fff; color: #e1251c;">Join Now</a>
            
            
               <a href="#" class=" cc-secondary-button SSO_popup_login" style="justify-content: center;text-align: center;max-width: 130px !important;min-width: unset;width: 100%;background: transparent;color: #fff;border-color: #fff;">Sign In</a>
            
          </div>
              {% endunless %}
        </div>
      </div>
      <div class="cc-pricing-table-member-cell-inner-row3">
        <ul>
          <li>
            You acknowledge that you have read and understand our Privacy Policy and our Supplemental Privacy Policy
            and that your personal information will be governed in accordance with those documents.
          </li>
          <li>You agree that you have read and consent to our Terms of Use.</li>
        </ul>
      </div>
    </div>
  </div>
{% endif %}
  
{% if club_price_active and elite == false %}

{% assign total_savings = 0 %}
  {% for item in cart.items %}
    {% assign club_price = item.product.metafields.custom.member_price.value | default: base_price | times : item.quantity %}
    {% assign elite_price = item.product.metafields.custom.elite_price.value | default: base_price | times : item.quantity %}
    {% assign savings = club_price | minus: elite_price %}
    {% assign total_savings = total_savings | plus: savings %}
  {% endfor %}
    
    <div class="cc-pricing-table-member-cell active">
      <div class="cc-pricing-table-member-cell-inner">
        <div class="cc-pricing-table-member-cell-inner-row1">
          <img src="{{ 'cc-elite-logo.png' | file_url }}" alt="Elite Logo" class="img-responsive">
          <h3>
            Save an Extra ${{ total_savings }}
            <span><b>+ Free Shipping & VIP Perks</b> on this item</span>
          </h3>
          <svg xmlns="http://www.w3.org/2000/svg" width="34" height="41" viewBox="0 0 34 41" fill="none">
            <path d="M10.0001 14.9989L18.1079 2.97522L30.5001 9.99891" stroke="#D5A03A" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M5.99967 38.9992C21.0036 35.4992 27.4997 23.9992 17.9996 3.99925" stroke="#D5A443" stroke-width="3" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="cc-pricing-table-member-cell-inner-row2">
          <label for="elite-checkboxx" style="color: #fff;" class="SSO_popup_elite_upgrade"> 
            <input type="checkbox" value="{{ settings.elite_product.selected_or_first_available_variant.id }}" id="elite-checkboxx" style=" display: inline-block; vertical-align: middle; margin: 0; ">
            <div class="accept_policy--text ">
            <b>Upgrade to an ELITE Membership for only</b> <b>$30/yr</b> to Unlock UNBELIEVABLE Savings & free
            shipping on every order.
            </div>
          </label>
            
        </div>
        <div class="cc-pricing-table-member-cell-inner-row3">
          <ul>
            <li>
              You acknowledge that you have read and understand our Privacy Policy and our Supplemental Privacy Policy
              and that your personal information will be governed in accordance with those documents.
            </li>
            <li>You agree that you have read and consent to our Terms of Use.</li>
          </ul>
        </div>
      </div>
    </div>
  {% endif %}
</div>

{% assign elite_product_id = settings.elite_product.first_available_variant.id %} 
<script>

 document.addEventListener('click', function(event) {
    if (event.target.matches('.close_popup')) { 
        var eliteCheckbox = document.getElementById('elite-checkboxx');
        eliteCheckbox.checked = !eliteCheckbox.checked; 
    }
})

  
</script>
