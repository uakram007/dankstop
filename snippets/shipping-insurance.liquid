{% if settings.show_shipping_insurance == 'custom' %}
{% assign cart_has_shipins = false %}
{% assign ship_ins_sku = 'SHIPINS' %}
{% assign ship_ins_handle = settings.shipping_insurance_product_handle %}

{%  assign only_elite_in_cart = false %}

{% for item in cart.items %}
  {% if item.product.handle == ship_ins_handle %}
    {% assign cart_has_shipins = true %}
    {% break %}
  {% endif %}


  {% if cart.item_count == 1 and item.product.id == settings.elite_product.id %}
    {%  assign only_elite_in_cart = true %}
  {% endif %}
{% endfor %}


{% if  only_elite_in_cart == false %}
  {% unless cart_has_shipins %}
    <div id="shipIns" class="shipins-wrapper" data-section-type="product" data-collections-related="/collections/{{ product_type_collection_handle }}?view=related" data-product-id="7225456518">
      <div class="shipins-container product-shop">
        <form action="/cart/add" id="shinsForm" method="post">
          <input name="quantity" type="hidden" value="1">
          <select id="shipins-selectors" name="id" class="hidden" class="shipins-selectors hidden" style="display: none;">
            {%- assign ship_ins_selected = false -%}
            {%- assign ship_ins_covered = 0 -%}
            {%- assign ship_ins_price = 0 -%}
            {%- assign ship_ins_product = all_products['shipping-insurance'] %}
            {% for variant in ship_ins_product.variants %}
            {%- assign ins_total_cents = variant.title | abs | times: 100 %}
            <option {% if cart.original_total_price < ins_total_cents and ship_ins_selected == false %}{% assign ship_ins_selected = true %}{% assign ship_ins_covered = ins_total_cents | money %}{% assign ship_ins_price = variant.price | money %} selected="selected" {% endif %} value="{{ variant.id }}">
              {{ variant.title }}
            </option>
            {% endfor %}
          </select>
          <div class="shipins-icon">
            <svg id="shipInsSvg" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                viewBox="0 0 70 65.5" enable-background="new 0 0 70 65.5" xml:space="preserve">
              <g>
                <g>
                  <path d="M33,0C14.8,0,0,15.9,0,35.4v0.3c0,0.5,0.5,1,1,1l0,0c0.5,0,1-0.4,1-1c0.1-4.7,4.3-8.6,9.3-8.6c5.1,0,9.3,3.9,9.3,8.7
                          c0,0.6,0.4,1,1,1s1-0.4,1-1c0-4.7,4.1-8.5,9.3-8.7V38c-5,0-8.1,0-13.6,0c-0.6,0-1,0.4-1,1c0,6,0,12.6,0,26c0,0.6,0.4,1,1,1h29.3
                          c0.6,0,1-0.4,1-1c0-13.4,0-19.9,0-26c0-0.6-0.4-1-1-1c-5.7,0-8.5,0-13.6,0V27.2c4.7,0.6,8.3,4.3,8.3,8.6c0,0.6,0.4,1,1,1
                          s1-0.4,1-1c0-4.8,4.4-8.7,9.8-8.7c5.3,0,9.8,3.9,9.8,8.6c0,0.5,0.5,1,1,1l0,0c0.5,0,1-0.5,1-1v-0.3C66,15.9,51.2,0,33,0z M28,40
                          v4.5h-8.7V40H28z M19.4,64V46.5H28v1.8c0,0.6,0.4,1,1,1h8c0.6,0,1-0.4,1-1v-1.8h8.7V64H19.4z M46.6,44.5H38V40h8.7v4.5H46.6z
                          M36,47.3h-6V40h6V47.3z M54.2,25.1c-4.8,0-9,2.6-10.8,6.4c-1.8-3.6-5.7-6.2-10.3-6.4l0,0l0,0c-0.2,0-0.3,0-0.5,0
                          c-4.8,0-9,2.6-10.8,6.4c-1.8-3.7-5.7-6.4-10.4-6.4c-3.5,0-6.7,1.5-8.8,4C5.3,13.7,17.9,2,33,2s27.8,11.7,30.5,27.2
                          C61.3,26.7,57.9,25.1,54.2,25.1z"/>
                </g>
                <g>
                  <path d="M33,5.2c-4.8,0-8.8,3.9-8.8,8.7s3.9,8.7,8.8,8.7c4.8,0,8.8-3.9,8.8-8.7S37.8,5.2,33,5.2z M33,20.7c-3.7,0-6.8-3-6.8-6.7
                          s3-6.7,6.8-6.7c3.7,0,6.8,3,6.8,6.7S36.7,20.7,33,20.7z"/>
                </g>
                <g>
                  <path d="M36.4,10.6l-4.8,4.9l-1.7-2.7c-0.3-0.5-0.9-0.6-1.4-0.3s-0.6,0.9-0.3,1.4l2.4,3.8c0.2,0.3,0.4,0.4,0.7,0.5
                          c0.3,0,0.6-0.1,0.8-0.3l5.7-5.8c0.4-0.4,0.4-1,0-1.4C37.4,10.2,36.8,10.2,36.4,10.6z"/>
                </g>
              </g>
            </svg>
          </div>
          <div class="shipins-text">
            <span class="shipins-title">{{ 'cart.general.shipping_insurance.title_html' | t: ship_ins_covered: ship_ins_covered, ship_ins_price: ship_ins_price }}</span>
            <ul>
              <li class="shipins-line1">{{ 'cart.general.shipping_insurance.line_1_html' | t: ship_ins_covered: ship_ins_covered, ship_ins_price: ship_ins_price }}</li>
              <li class="shipins-line2">{{ 'cart.general.shipping_insurance.line_2_html' | t: ship_ins_covered: ship_ins_covered, ship_ins_price: ship_ins_price }}</li>
              <li class="shipins-line3">{{ 'cart.general.shipping_insurance.line_3_html' | t: ship_ins_covered: ship_ins_covered, ship_ins_price: ship_ins_price }}</li>
            </ul>
          </div>
          <div class="shipins-price">
            <span>{{ ship_ins_price }}</span>
          </div>
          <div class="shipins-atc-container">
            <input data-btn-addToCart class="btn btn-default shipins-atc" id="shinsATC" name="add" type="submit" value="{{ 'cart.general.shipping_insurance.add_to_cart_button_text' | t }}">
          </div>
        </form>
      </div>
    </div>
  {% endunless %}
{% endif %}

{% endif %}